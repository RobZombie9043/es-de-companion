# ES-DE Companion

<a href="https://apps.obtainium.imranr.dev/redirect?r=obtainium://app/%7B%22id%22%3A%22com.esde.companion%22%2C%22url%22%3A%22https%3A%2F%2Fgithub.com%2FRobZombie9043%2Fes-de-companion%22%2C%22author%22%3A%22RobZombie9043%22%2C%22name%22%3A%22ES-DE%20Companion%22%2C%22preferredApkIndex%22%3A0%2C%22additionalSettings%22%3A%22%7B%5C%22includePrereleases%5C%22%3Afalse%2C%5C%22fallbackToOlderReleases%5C%22%3Atrue%2C%5C%22filterReleaseTitlesByRegEx%5C%22%3A%5C%22%5C%22%2C%5C%22filterReleaseNotesByRegEx%5C%22%3A%5C%22%5C%22%2C%5C%22verifyLatestTag%5C%22%3Afalse%2C%5C%22sortMethodChoice%5C%22%3A%5C%22date%5C%22%2C%5C%22useLatestAssetDateAsReleaseDate%5C%22%3Afalse%2C%5C%22releaseTitleAsVersion%5C%22%3Afalse%2C%5C%22trackOnly%5C%22%3Afalse%2C%5C%22versionExtractionRegEx%5C%22%3A%5C%22%5C%22%2C%5C%22matchGroupToUse%5C%22%3A%5C%22%5C%22%2C%5C%22versionDetection%5C%22%3Atrue%2C%5C%22releaseDateAsVersion%5C%22%3Afalse%2C%5C%22useVersionCodeAsOSVersion%5C%22%3Afalse%2C%5C%22apkFilterRegEx%5C%22%3A%5C%22%5C%22%2C%5C%22invertAPKFilter%5C%22%3Afalse%2C%5C%22autoApkFilterByArch%5C%22%3Atrue%2C%5C%22appName%5C%22%3A%5C%22%5C%22%2C%5C%22appAuthor%5C%22%3A%5C%22%5C%22%2C%5C%22shizukuPretendToBeGooglePlay%5C%22%3Afalse%2C%5C%22allowInsecure%5C%22%3Afalse%2C%5C%22exemptFromBackgroundUpdates%5C%22%3Afalse%2C%5C%22skipUpdateNotifications%5C%22%3Afalse%2C%5C%22about%5C%22%3A%5C%22%5C%22%2C%5C%22refreshBeforeDownload%5C%22%3Afalse%2C%5C%22includeZips%5C%22%3Afalse%2C%5C%22zippedApkFilterRegEx%5C%22%3A%5C%22%5C%22%7D%22%2C%22overrideSource%22%3Anull%7D">
  <img
    src="https://github.com/ImranR98/Obtainium/blob/main/assets/graphics/badge_obtainium.png?raw=true"
    alt="Add ES-DE Companion to Obtainium"
    width="182"
  >
</a>

![Version](https://img.shields.io/badge/version-0.5.1-blue)
![Android](https://img.shields.io/badge/Android-10%2B-green)

ES-DE Companion is a companion application for [ES-DE](https://es-de.org) that enhances your gaming experience by transforming dual-screen Android devices into immersive retro gaming setups. The app displays beautiful game artwork, videos, and customizable overlay widgets on a secondary screen while you browse and play games in ES-DE.

[![Watch the video](https://img.youtube.com/vi/sMCEDMRibs0/0.jpg)](https://youtu.be/sMCEDMRibs0)

The goal of this companion app is to provide a high-quality second-screen experience that seamlessly integrates with ES-DE, requires minimal setup, and offers extensive customization options for your gaming display.

ES-DE Companion is designed for dual-screen Android devices and external display setups, automatically displaying game artwork, marquees, videos, and system information as you browse your collection in ES-DE on the primary screen.

> **Note**: This is a semi-official companion app for ES-DE. While not part of the core ES-DE project, it's designed by one of the ES-DE team members as a side project to seamlessly integrate with ES-DE's custom event scripts system.

> **Note**: This app was developed with AI assistance. The full source code is available for transparency and community contributions.

## Download

Visit the [Releases page](https://github.com/RobZombie9043/es-de-companion/releases) to download the latest APK.

The app requires ES-DE to be installed on your device. 

## Additional Information

[USERGUIDE.md](USERGUIDE.md) - Comprehensive guide covering setup, features, and advanced configuration

[FAQ.md](FAQ.md) - Frequently asked questions and troubleshooting

[CHANGELOG.md](CHANGELOG.md) - Detailed release history and changelog

## Some Feature Highlights

Here are some highlights of what ES-DE Companion can do for your gaming setup.

### Dynamic Display

_The companion screen automatically updates as you browse games in ES-DE, showing high-quality artwork and your configured widgets._

**Display Features:**
- Real-time synchronization with ES-DE
- Video playback support with configurable delay
- Background music during browsing
- System logo display (built-in + custom logos)
- Customizable animations (fade, scale)
- Adjustable background dimming and blur effects

### Widget Overlay System

_Create fully customizable overlay widgets to display game artwork - marquees, box art, screenshots, fanart, and more. Position and resize each widget exactly how you want._

**Widget Features:**
- 11 widget types: Marquee, 2D/3D Box Art, Mix Image, Screenshots, Fanart, Title Screens, Back Covers, Physical Media, System Logos, and Game Descriptions
- Drag-and-drop positioning with optional snap-to-grid
- Resizable widgets with corner handles
- Layer ordering (bring forward/send back)
- Context-aware: separate widget layouts for system browsing vs game browsing
- Protected by lock mode to prevent accidental changes

### App Drawer

_A full Android app launcher accessible from the companion screen. Launch apps on either display with per-app preferences._

**Drawer Features:**
- Search functionality for quick app access
- Customizable grid layout
- App visibility control (hide unwanted apps)
- Per-app display preferences (launch on this screen or other screen)
- Adjustable transparency

### Easy Setup

_The built-in Quick Setup wizard guides you through configuration on first launch, automatically creating the necessary ES-DE integration scripts._

**Setup Features:**
- Step-by-step configuration wizard
- Automatic script creation for ES-DE integration
- Comprehensive tutorial system
- Script validation and status checking
- Storage permission handling

### Visual Customization

_Extensive customization options let you tailor the companion display to your preferences._

**Customization Options:**
- Background priority (Fanart vs Screenshot)
- Animation styles (None, Fade, Scale, Custom)
- Independent logo controls for systems and games
- Dimming control (0-100%)
- Blur effects (Android 12+)
- Custom fallback images
- Music playback settings
- Video behavior configuration

## Requirements

**Hardware:**
- Dual-screen Android device or external display support
- Android 10+ (API level 29 or higher)

**Software:**
- ES-DE installed with downloaded media
- Storage permissions for accessing media files

**Recommended:**
- [Mjolnir](https://github.com/blacksheepmvp/mjolnir) for optimal dual-screen home screen management

## Quick Start

1. **Download and Install**
   - Get the latest APK from the [Releases page](https://github.com/RobZombie9043/es-de-companion/releases)
   - Install on your Android device

2. **Initial Setup**
   - Launch ES-DE Companion
   - Follow the Quick Setup wizard
   - Grant storage permissions when prompted

3. **Enable Scripts in ES-DE**
   - Open ES-DE
   - Press START â†’ Other Settings
   - Toggle ON "Custom Event Scripts"
   - Toggle ON "Browsing Custom Events"

4. **Start Browsing**
   - Browse games in ES-DE on your primary screen
   - Watch the companion display automatically update with artwork

## How It Works

ES-DE Companion integrates with ES-DE through the custom event scripts system:

1. **Script Integration**: The app creates event scripts that ES-DE calls when you browse games/systems, launch games, and activate screensavers
2. **File Monitoring**: Scripts write to log files that the app monitors in real-time using FileObserver
3. **Media Display**: The app reads game metadata and displays corresponding artwork from ES-DE's downloaded media folder
4. **Widget Overlays**: Customizable overlay widgets show additional game information on top of the artwork

## File Structure

The app uses these default paths (all configurable in settings):

| Path | Default Location | Purpose |
|------|-----------------|---------|
| **Scripts** | `/storage/emulated/0/ES-DE/scripts` | ES-DE integration scripts |
| **Logs** | `/storage/emulated/0/ES-DE Companion/logs` | Event log files |
| **Downloaded Media** | `/storage/emulated/0/ES-DE/downloaded_media` | Game artwork and videos from ES-DE |
| **System Images** | `/storage/emulated/0/ES-DE/downloaded_media/system_images` | Custom system background images (optional) |
| **System Logos** | `/storage/emulated/0/ES-DE/downloaded_media/system_logos` | Custom system logos (optional) |
| **Music** | `/storage/emulated/0/ES-DE Companion/music` | Custom background music (optional) |


**Note**: Scripts and logs use internal storage (`/ES-DE Companion/`) for better compatibility with SD card ES-DE installations.

## Custom Media

### System Background Images (Optional Override)

To override the default random game artwork in system view:
1. Place custom images in the system images folder
2. Use filenames matching ES-DE system shortnames: `snes.webp`, `arcade.png`, `psx.jpg`, etc.
3. Supported formats: WEBP, PNG, JPG, JPEG, GIF

### System Logos (Optional Override)

To add custom system logos or override built-in logos:
1. Place custom images in the system logos folder
2. Use filenames matching ES-DE system shortnames: `snes.svg`, `snes.png`, `arcade.webp`, etc.
3. SVG format recommended for best quality
4. Custom logos take priority over built-in logos

### Music Path (Optional Override)

To add custom music:
1. Place custom music in the music folder
2. For system specific music, place the music in specific systems subfolder: ~music/systems/{systemname}/
3. Supported formats: MP3, OGG, FLAC, M4A, WAV, AAC

## Development

This app is open source and available on GitHub. Contributions are welcome!

**Technologies:**
- Kotlin for Android
- Glide for image loading
- ExoPlayer for video playback
- MediaPlayer for background music
- AndroidSVG for SVG rendering
- Material Design Components

**Architecture:**
- State machine for app lifecycle management
- FileObserver for real-time ES-DE integration
- SharedPreferences for settings persistence
- Custom view system for widget overlays

## Credits

**Integration:**
- Designed for [ES-DE](https://es-de.org) by Leon Styhre
- Uses ES-DE's custom event scripts system

**Community:**
- Special thanks to the ES-DE community for feedback

## License

This project is open source. See the LICENSE file for details.

## Support

**Issues and Bug Reports:**\
https://github.com/RobZombie9043/es-de-companion/issues

**Documentation:**\
See [USERGUIDE.md](USERGUIDE.md) for comprehensive documentation
